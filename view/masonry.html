<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>瀑布流 masonry</title>
    <script src="../web/dist/bower/jquery/dist/jquery.min.js"></script>
    <script src="../web/dist/bower/imagesloaded/imagesloaded.pkgd.min.js"></script>
    <script src="../web/dist/bower/masonry-layout/dist/masonry.pkgd.min.js"></script>
    <!-- // <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script> -->
    <style>
        .grid::after {
            display: block;
            content: '';
            clear: both;
        }

        .grid-item {
            /* width: calc(100% / 3 * 1); */
            float: left;
            /* padding: 0 5px 5px; */
            padding-left: 5px;
            padding-top: 5px;
            box-sizing: border-box;
        }

        .grid-sizer,
        .grid-item {
            width: calc(100% / 3 * 1);
        }

        .is-loading {
            background-color: black;
        }

        img {
            width: 100%;
            vertical-align: bottom;
        }

        @media screen and (max-width: 768px) {
            .grid-item {
                width: 50%;
            }
        }

        @media screen and (max-width: 414px) {
            .grid-item {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <div class="grid">
        <div class="is-loading">
            <img src="https://lh3.googleusercontent.com/proxy/pWhPJswU2umbbCe0n5osQZ9SwuGXo1BKl6CyFtT8__NaObniaeuJ-MEGneqqRaYmXOAYsUPxcf-cIlsy32KI3oFmmhHSx8rkChNsdWSTKwOqEP-Lc_f5UDzoe0qo3Q">
        </div>
        <div class="is-loading">
            <img src="https://lh3.googleusercontent.com/proxy/oJIB2vLzm4pBD2gegJ0QdkUOrrDOH45fwogD44mUROjD-E8tY2mdcbqDW8GZLs7BNKFsC40CpEwiJrGT9owWg1gaEMKV-5ZOl-xye07YSjZZ2q61d7E">
        </div>
        <div class="is-loading">
            <img src="https://img.tukuppt.com/bg_grid/00/14/86/WvJAithG7a.jpg!/fh/350">
        </div>
        <div class="is-loading">
            <img src="https://lh3.googleusercontent.com/proxy/SNmDtpFQCEs14h8oh98DsPMlXhiQXHJ1NpN60CJ66uz2X1Fsbal8MXPJUNmk8l2j4NvSH-oiCQ7qDthsTaBvIEMwKUDNQHxOyeceNGOfFz3JQNem1vNs-jAa9CV7vw">
        </div>
        <div class="is-loading">
            <img src="https://lh3.googleusercontent.com/proxy/DSwAfp4I--dzqnC_x_0X8Zh_K5pkA16trFAh4MHNtHGaHPgQ2qRdO6EoUN0c1XxuCLRJdkwFr5EkWAJOs68KrLg34Jm5XmOaROJFNkCRcQ">
        </div>
        <div class="is-loading">
            <img src="https://img.iplaysoft.com/wp-content/uploads/2019/free-images/free_stock_photo.jpg">
        </div>
        <div class="is-loading">
            <img src="https://img95.699pic.com/photo/40011/0709.jpg_wh860.jpg">
        </div>
        <div class="is-loading">
            <img src="https://lh3.googleusercontent.com/proxy/ytTsS0Qno8Y5GmbJW1ulu_lx5bOEUzzc7nUiJLGzfXm99vW95zVd-Vwjuxp0xiVkj99Ks2R83-8CbHvbCBv3whxN1CmBws0A29CK1AsV6hm6XlFyeV5S">
        </div>
        <div class="is-loading">
            <img src="https://lh3.googleusercontent.com/proxy/2f3F9mYIrZjKPXNJw48sD2LhEac-RsYqSVjqnP0PvH_uWJt_fLRk_erk3T6Ye0q39jayioa6VfJ8Ljn6yNzEsG4Un4ep9xQuEibeE2BLv2YhkZ2pa5y-nb7vGVgiv9W9">
        </div>
        <div class="is-loading">
            <img src="https://pic-bucket.ws.126.net/photo/0009/2019-12-10/F02FNPP40AI20009NOS.jpg">
        </div>
    </div>

    <script>
        $(function () {
            var $grid = $('.grid').imagesLoaded(function () {
                // init Masonry after all images have loaded
                $grid.masonry({
                    // options...
                    itemSelector: '.grid-item'
                })
            }).progress(function (instance, image) {
                var result = image.isLoaded ? 'loaded' : 'broken';
                image.img.parentNode.className = image.isLoaded ? 'grid-item' : 'is-loading';
                console.log('image is ' + result + ' for ' + image.img.src);
            });
        })
    </script>
</body>

</html>